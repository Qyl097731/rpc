# Version 2.0.0 - 2023-05-06

## 功能需求实现


- [x] 服务注册与发现：服务端和客户端需要实现注册和发现服务的功能，可以使用 Zookeeper 等服务注册中心来进行管理，当服务启动或停止时，相应的服务将在注册中心上进行注册和注销，客户端通过服务注册中心获得服务端地址进行调用。

- [x] 负载均衡：负责分发请求到多个服务实例中的负载均衡器是治理中非常重要的一环，常用的还是基于权重、故障检测API的负载均衡算法。

- [x] 解决了历史遗留问题
  - 前面的版本是只能一个provider来提供服务，连接池是对该provider进行多次连接，一旦该节点挂了，服务都不能用，并
  容灾差，可用性差；现在的版本能够实现服务与节点之间多对多的关系。即一个服务可以有多个服务节点进行提供，一个节点
  能提供多个服务。
  - 无法动态监测服务上下线
- [x] 引入心跳机制：通过netty管道中添加handler实现心跳机制，防止过多的僵尸链接占用带宽。

通过Registry中对ConcurrentHashMap(<rpcPeer,handler>)的反转(<service,List<rpcPeer>) 进行真正的负载均衡
通过ConcurrentHashMap(<rpcPeer,handler>)缓存了多个服务节点之间的连接，同时rpcPeer中增加了该节点提供的服务集合，
   这样方便后续实现根据服务查找的时候的对ConcurrentHashMap(<rpcPeer,handler>)的反转(<service,List<rpcPeer>)。
   也即   一个服务 可以由 多个服务节点进行提供。然后进行负载均衡操作。

## 非功能需求实现

### 性能要求

- 系统吞吐量：系统需要支持高并发的请求和响应，以满足大量请求的处理需求。

- 响应时间：系统需要支持快速响应的功能，以确保高效的通信交互体验。

### 健壮性

通过自旋等待，超时以及重试机制，防止服务上线慢导致的服务获取不到，或者长时间等待服务导致系统客户端阻塞问题。

## 测试结果

详情见 测试文档/rpc-netty/v2.0.0/05-06.md

## 接下来的计划


